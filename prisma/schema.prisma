generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Candidate {
  id                       String    @id @default(uuid())
  email                    String    @unique
  password                 String
  firstName                String?
  lastName                 String?
  phone                    String?
  description              String?
  githubUrl                String?
  portfolioUrl             String?
  fileName                 String?
  fileUrl                  String?
  resetPasswordToken       String?   @unique
  resetPasswordTokenExpiry DateTime?
}

model Employer {
  id                       String    @id @default(uuid())
  email                    String    @unique
  password                 String
  name                     String?
  city                     String?
  address                  String?
  description              String?
  phone                    String?
  website                  String?
  logoName                 String?
  logoUrl                  String?
  resetPasswordToken       String?   @unique
  resetPasswordTokenExpiry DateTime?
}

model Offer {
  id              String        @id @default(uuid())
  title           String
  description     String
  city            String
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  experienceId    Int
  experience      Experience    @relation(fields: [experienceId], references: [id])
  typeOfWorkId    Int
  typeOfWork      TypeOfWork    @relation(fields: [typeOfWorkId], references: [id])
  operatingModeId Int
  operatingMode   OperatingMode @relation(fields: [operatingModeId], references: [id])
  mustHaveTech    Technology[]  @relation("mustHaveTech")
  niceToHaveTech  Technology[]  @relation("niceToHaveTech")

  @@index([experienceId])
  @@index([typeOfWorkId])
  @@index([operatingModeId])
}

model Experience {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  offers Offer[]
}

model TypeOfWork {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  offers Offer[]
}

model OperatingMode {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  offers Offer[]
}

model Technology {
  id               Int     @id @default(autoincrement())
  name             String  @unique
  offersMustHave   Offer[] @relation("mustHaveTech")
  offersNiceToHave Offer[] @relation("niceToHaveTech")
}
